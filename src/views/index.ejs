<!DOCTYPE html>
<html lang="PT-BR">
   
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
crossorigin="anonymous">
    <meta charset="UTF-8">
    <link rel=icon type=imagex-icon href="/img/favicon.png">
    <link rel="stylesheet" href="/index.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relátorio impressão Samar</title>
    
   
  </head>
<body>
    
    <h1 class="title">Relátorio de Impressão</h1>
    <div class="container">
        <button class="button-cadastro btn">Cadastro</button>
        <div class="form-group">
            <form type="submit" action="http://10.100.50.252:8180/criar" method="post" class="formulario" id="form">
                <label for="setor">Setor</label>
                <input class="form-control" type="text" placeholder="Setor" required="true" name="setor">
                <label for="data">Data</label>
                <input class="form-control" type="date" placeholder="Data" required="true" name="data">
                <label for="ip">Endereço IP</label>
                <input class="form-control" type="text" placeholder="IP" name="ip">
                <label for="modelo">Modelo da impressora</label>
                <input class="form-control" type="text" placeholder="Modelo da impressora" required="true" name="modelo">
                <label for="n-anterior">Número de impressão Anterior</label>
                <input class="form-control" type="number" placeholder="Número de impressão Anterior" required="true" name="anterior">
                <label for="n-atual">Número de impressão Atual</label>
                <input class="form-control" type="number" placeholder="Número de impressão Atual" required="true" name="atual">
                <button class="btn" id="button-enviar">Enviar Dados</button>
            </form>
        </div>
    </div>
    <div class="container mt-03">
        <h3>Dados Relátorios</h3>
       
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="table-primary">Setor</th>
                    <th class="table-primary">Data</th>
                    <th class="table-primary">Endereço IP</th>
                    <th class="table-primary" id="modelo">Modelo da Impressora</th>
                    <th class="table-primary">Número de impressão Anterior</th>
                    <th class="table-primary" id="atual">Número de impressão Atual</th>
                    <th class="table-primary">Total</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <div class="fid">
                        <% modelos.forEach((modelo)=>{ %>
                 
                            
                           
                    </div>
                </tr>
            </tbody>
            <tbody>
                <tr class="flex">
                  <td scope="row"><%= modelo.setor %></td>
                  <td scope="row"><%= modelo.data %></td>
                  <td scope="row"><%= modelo.ip %></td>
                  <td scope="row"><%= modelo.modelo %></td>
                  <td scope="row"><%= modelo.anterior %></td>
                  <td scope="row" ><%= modelo.atual%></td>
                  <td scope="row"><%= modelo.atual - modelo.anterior %></td>
                  <tr>
                    <td><button class="btn" id="button-deletar" onclick="deletar('<%= modelo.id %>')">Excluir</button></td>
                </tr>
                </tr>
                
                
               
                <% }) %>
              </tbody>
        </table>

                
    
            
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
    const btnCadastro = document.querySelector('.button-cadastro')
    const form = document.querySelector('#form')
    btnCadastro.addEventListener('click', ()=>{
        if(form.style.display =='none' ? form.style.display ='block' : form.style.display ='none'){}
    })

    async function  deletar(id){
        try {
            const response = await fetch(`/deletar/${id}`,{
            method:'delete'
        })
        const result = await response.text()
        console.log(result);
            
        } catch (error) {
            console.log(error); 
        }
        window.location.href = '/';
    }
</script>
</body>
</html>